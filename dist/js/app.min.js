!function(){"use strict";var app=angular.module("portfolioApp",[]);app.directive("scroll",function($window){return function(scope,element,attrs){var sections=angular.element(".page");angular.element($window).bind("scroll",function(){var currentSection,id,currentScroll=this.pageYOffset;angular.forEach(sections,function(section,index){var divPosition=angular.element(section).offset().top;currentScroll>divPosition-1&&(currentSection=angular.element(section)),id=angular.element(currentSection).prop("id"),angular.element("a").removeClass("active"),angular.element("[href=#"+id+"]").addClass("active")}),scope.$apply()})}}),app.controller("SiteController",function($scope,$window,$location){angular.element(".toggle-nav").on("click",function(){return angular.element("body").toggleClass("is-sidebar-expanded"),!1}),angular.element(".toggle-back").on("click",function(){return $window.history.back(),!1}),angular.element("a[href*=#]:not([href=#])").on("click",function(){var target=angular.element(this.hash);return target=target.length?target:$("[id="+this.hash.slice(1)+"]"),target.length?(angular.element(".active").removeClass("active"),angular.element(this).addClass("active"),angular.element("html, body").animate({scrollTop:target.offset().top},1e3),!1):void 0}),angular.element("[data-ga-category]").on("click",function(){var category=angular.element(this).prop("data-ga-category"),action=angular.element(this).prop("data-ga-action"),label=angular.element(this).prop("data-ga-label");ga("send","_trackEvent",category,action,label)})}),app.controller("PortfolioController",function($scope,$q,$http,$timeout){$scope.showWaiting=!0,$scope.results=[],$scope.result=null,$scope.loadFeed=function(){var deferred=$q.defer();return $http.get("./js/data/portfolio.js",{headers:{"Content-Type":"text/plain"}}).success(function(data){deferred.resolve(data)}).error(function(){deferred.reject(),$scope.showWaiting=!1}),deferred.promise};var feed=function(){$scope.loadFeed().then(function(data){$scope.results=data.items,$scope.predicate="id",$scope.showWaiting=!1})};$timeout(feed,2500)}),app.controller("BlogFeedController",function($scope,$q,$http,$timeout){$scope.showWaiting=!0,$scope.loadFeed=function(){var deferred=$q.defer(),url="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=JSON_CALLBACK&q="+encodeURIComponent("http://blog.jamiederycke.me.uk/feed/");return $http.jsonp(url).success(function(data){deferred.resolve(data)}).error(function(){deferred.reject(),$scope.showWaiting=!1}),deferred.promise};var feed=function(){$scope.loadFeed().then(function(data){$scope.predicate="datePublished",$scope.feed={items:data.responseData.feed.entries},$scope.showWaiting=!1})};$timeout(feed,2500)})}();